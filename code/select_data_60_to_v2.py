import json
import os
from datetime import datetime

# ============ 1. æ‰‹åŠ¨æ”¶é›†çš„é«˜è´¨é‡é—®ç­” ============
print("ğŸ“š å¼€å§‹æ„å»ºè®­ç»ƒæ•°æ®é›†...")

# è®¡ç®—æœºè€ƒç ”æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆæ•°æ®ç»“æ„ + æ“ä½œç³»ç»Ÿ + è®¡ç®—æœºç½‘ç»œ + è®¡ç®—æœºç»„æˆåŸç†ï¼‰
train_examples = [
    # ===== æ•°æ®ç»“æ„ï¼ˆ15æ¡ï¼‰=====
    {"instruction": "ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ", "output": "æ•°æ®ç»“æ„æ˜¯è®¡ç®—æœºå­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼ŒåŒ…æ‹¬é€»è¾‘ç»“æ„ï¼ˆçº¿æ€§ã€æ ‘ã€å›¾ï¼‰å’Œç‰©ç†ç»“æ„ï¼ˆé¡ºåºã€é“¾å¼ï¼‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ï¼Ÿ", "output": "æ—¶é—´å¤æ‚åº¦æ˜¯ç®—æ³•æ‰§è¡Œæ—¶é—´éšè¾“å…¥è§„æ¨¡å¢é•¿çš„é‡åº¦ï¼Œç”¨å¤§Oè¡¨ç¤ºæ³•ï¼Œå¸¸è§çš„æœ‰O(1)ã€O(n)ã€O(nÂ²)ã€O(log n)ã€‚"},
    {"instruction": "O(1)å’ŒO(n)çš„åŒºåˆ«", "output": "O(1)æ˜¯å¸¸æ•°æ—¶é—´å¤æ‚åº¦ï¼Œæ‰§è¡Œæ—¶é—´å›ºå®šï¼›O(n)æ˜¯çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œæ‰§è¡Œæ—¶é—´ä¸è¾“å…¥è§„æ¨¡æˆæ­£æ¯”ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ç©ºé—´å¤æ‚åº¦ï¼Ÿ", "output": "ç©ºé—´å¤æ‚åº¦æ˜¯ç®—æ³•è¿è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„é‡åº¦ï¼ŒåŒ…æ‹¬è¾“å…¥ç©ºé—´å’Œé¢å¤–ç©ºé—´ã€‚"},
    {"instruction": "æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«", "output": "æ ˆæ˜¯åè¿›å…ˆå‡º(LIFO)ï¼Œåªèƒ½åœ¨æ ˆé¡¶æ“ä½œï¼›é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡º(FIFO)ï¼Œé˜Ÿå°¾å…¥é˜Ÿã€é˜Ÿé¦–å‡ºé˜Ÿã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ", "output": "äºŒå‰æ ‘æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­æ ‘çš„æ ‘ç»“æ„ï¼Œåˆ†ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå¸¸ç”¨äºæŸ¥æ‰¾å’Œæ’åºã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘ï¼Ÿ", "output": "äºŒå‰æœç´¢æ ‘å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å¤§äºæ ¹èŠ‚ç‚¹ï¼Œä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ", "output": "å“ˆå¸Œè¡¨é€šè¿‡å“ˆå¸Œå‡½æ•°å°†å…³é”®ç æ˜ å°„åˆ°è¡¨ä½ç½®ï¼Œå®ç°O(1)çš„å¹³å‡æŸ¥æ‰¾æ—¶é—´ï¼Œè§£å†³å†²çªçš„æ–¹æ³•æœ‰é“¾åœ°å€æ³•å’Œå¼€æ”¾åœ°å€æ³•ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯é“¾è¡¨ï¼Ÿ", "output": "é“¾è¡¨æ˜¯ç‰©ç†ä¸Šéè¿ç»­çš„çº¿æ€§è¡¨ï¼ŒèŠ‚ç‚¹åŒ…å«æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸï¼Œåˆ†ä¸ºå•é“¾è¡¨ã€åŒé“¾è¡¨å’Œå¾ªç¯é“¾è¡¨ã€‚"},
    {"instruction": "æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«", "output": "æ•°ç»„å†…å­˜è¿ç»­ã€éšæœºè®¿é—®O(1)ã€æ’å…¥åˆ é™¤O(n)ï¼›é“¾è¡¨å†…å­˜åˆ†æ•£ã€éšæœºè®¿é—®O(n)ã€æ’å…¥åˆ é™¤O(1)ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å›¾çš„éå†ï¼Ÿ", "output": "å›¾çš„éå†åŒ…æ‹¬æ·±åº¦ä¼˜å…ˆæœç´¢(DFS)å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)ï¼ŒDFSç”¨æ ˆå®ç°ï¼ŒBFSç”¨é˜Ÿåˆ—å®ç°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å¿«é€Ÿæ’åºï¼Ÿ", "output": "å¿«é€Ÿæ’åºé€šè¿‡åˆ†æ²»æ³•ï¼Œé€‰æ‹©åŸºå‡†å°†æ•°ç»„åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé€’å½’æ’åºï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦O(n log n)ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å†’æ³¡æ’åºï¼Ÿ", "output": "å†’æ³¡æ’åºé‡å¤éå†æ•°ç»„ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ å¹¶äº¤æ¢ï¼Œæ¯è½®å°†æœ€å¤§å…ƒç´ å†’æ³¡åˆ°æœ€åï¼Œæ—¶é—´å¤æ‚åº¦O(nÂ²)ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ", "output": "äºŒåˆ†æŸ¥æ‰¾åœ¨æœ‰åºæ•°ç»„ä¸­æ¯æ¬¡å–ä¸­é—´å€¼æ¯”è¾ƒï¼Œå°†æŸ¥æ‰¾èŒƒå›´ç¼©å°ä¸€åŠï¼Œæ—¶é—´å¤æ‚åº¦O(log n)ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å †ï¼Ÿ", "output": "å †æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå¤§é¡¶å †çˆ¶èŠ‚ç‚¹å¤§äºå­èŠ‚ç‚¹ï¼Œå°é¡¶å †çˆ¶èŠ‚ç‚¹å°äºå­èŠ‚ç‚¹ï¼Œå¸¸ç”¨äºä¼˜å…ˆé˜Ÿåˆ—å’Œå †æ’åºã€‚"},
    
    # ===== æ“ä½œç³»ç»Ÿï¼ˆ15æ¡ï¼‰=====
    {"instruction": "ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿï¼Ÿ", "output": "æ“ä½œç³»ç»Ÿæ˜¯ç®¡ç†è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶èµ„æºçš„ç³»ç»Ÿè½¯ä»¶ï¼Œæä¾›ç”¨æˆ·æ¥å£ã€è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰åŠŸèƒ½ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ", "output": "è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼ŒåŒ…å«ä»£ç ã€æ•°æ®ã€å †æ ˆå’ŒPCBã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ", "output": "çº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯è¿›ç¨‹å†…çš„æ‰§è¡Œå•å…ƒï¼Œå…±äº«è¿›ç¨‹çš„èµ„æºï¼Œæœ‰è‡ªå·±çš„æ ˆå’Œå¯„å­˜å™¨ã€‚"},
    {"instruction": "è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«", "output": "è¿›ç¨‹èµ„æºç‹¬ç«‹ã€åˆ‡æ¢å¼€é”€å¤§ï¼›çº¿ç¨‹å…±äº«è¿›ç¨‹èµ„æºã€åˆ‡æ¢å¼€é”€å°ï¼›è¿›ç¨‹å´©æºƒä¸å½±å“å…¶ä»–è¿›ç¨‹ï¼Œçº¿ç¨‹å´©æºƒå¯èƒ½å¯¼è‡´æ•´ä¸ªè¿›ç¨‹å´©æºƒã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ", "output": "æ­»é”æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œå¯¼è‡´éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œçš„çŠ¶æ€ã€‚å¿…è¦æ¡ä»¶ï¼šäº’æ–¥ã€ä¿æŒå¹¶ç­‰å¾…ã€éå‰¥å¤ºã€å¾ªç¯ç­‰å¾…ã€‚"},
    {"instruction": "å¦‚ä½•é¿å…æ­»é”ï¼Ÿ", "output": "ç ´åæ­»é”å››ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼šç ´åäº’æ–¥ï¼ˆéš¾å®ç°ï¼‰ã€ç ´åä¿æŒå¹¶ç­‰å¾…ï¼ˆä¸€æ¬¡æ€§åˆ†é…ï¼‰ã€ç ´åéå‰¥å¤ºï¼ˆå¯å‰¥å¤ºèµ„æºï¼‰ã€ç ´åå¾ªç¯ç­‰å¾…ï¼ˆèµ„æºæœ‰åºåˆ†é…ï¼‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ", "output": "è™šæ‹Ÿå†…å­˜å°†ç£ç›˜ä½œä¸ºå†…å­˜çš„æ‰©å±•ï¼Œä¸ºç¨‹åºæä¾›å¤§äºç‰©ç†å†…å­˜çš„åœ°å€ç©ºé—´ï¼Œé€šè¿‡åˆ†é¡µæˆ–åˆ†æ®µå®ç°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ", "output": "é¡µé¢ç½®æ¢ç®—æ³•åŒ…æ‹¬FIFOã€LRUã€LFUã€Clockç­‰ï¼Œç”¨äºç¼ºé¡µæ—¶é€‰æ‹©è¢«æ¢å‡ºçš„é¡µé¢ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯LRUï¼Ÿ", "output": "LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨)ç½®æ¢æœ€é•¿æ—¶é—´æœªè¢«è®¿é—®çš„é¡µé¢ï¼ŒåŸºäºå±€éƒ¨æ€§åŸç†ï¼Œç¡¬ä»¶æ”¯æŒéœ€è¦ç‰¹æ®Šç¡¬ä»¶ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯è¿›ç¨‹è°ƒåº¦ï¼Ÿ", "output": "è¿›ç¨‹è°ƒåº¦ç®—æ³•åŒ…æ‹¬å…ˆæ¥å…ˆæœåŠ¡(FCFS)ã€çŸ­ä½œä¸šä¼˜å…ˆ(SJF)ã€æ—¶é—´ç‰‡è½®è½¬(RR)ã€ä¼˜å…ˆçº§è°ƒåº¦ç­‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯åŒæ­¥å’Œäº’æ–¥ï¼Ÿ", "output": "äº’æ–¥æ˜¯æŒ‡å¤šä¸ªè¿›ç¨‹ä¸èƒ½åŒæ—¶è®¿é—®ä¸´ç•Œèµ„æºï¼›åŒæ­¥æ˜¯æŒ‡è¿›ç¨‹é—´æœ‰å…ˆåé¡ºåºï¼Œé€šè¿‡ä¿¡å·é‡ã€ç®¡ç¨‹ç­‰æœºåˆ¶å®ç°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ä¿¡å·é‡ï¼Ÿ", "output": "ä¿¡å·é‡æ˜¯Dijkstraæå‡ºçš„åŒæ­¥æœºåˆ¶ï¼ŒåŒ…å«æ•´æ•°å€¼å’Œç­‰å¾…é˜Ÿåˆ—ï¼ŒPæ“ä½œå‡1ã€Væ“ä½œåŠ 1ï¼Œç”¨äºå®ç°åŒæ­¥å’Œäº’æ–¥ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ï¼Ÿ", "output": "ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜æ˜¯ç»å…¸åŒæ­¥é—®é¢˜ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å…±äº«ç¼“å†²åŒºï¼Œéœ€è¦äº’æ–¥è®¿é—®å¹¶ä¿è¯åŒæ­¥ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Ÿ", "output": "æ–‡ä»¶ç³»ç»Ÿç®¡ç†æ–‡ä»¶çš„å­˜å‚¨ã€æ£€ç´¢ã€æ›´æ–°å’Œä¿æŠ¤ï¼ŒåŒ…æ‹¬ç›®å½•ç»“æ„ã€æ–‡ä»¶åˆ†é…æ–¹æ³•å’Œç©ºé—²ç©ºé—´ç®¡ç†ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ç£ç›˜è°ƒåº¦ï¼Ÿ", "output": "ç£ç›˜è°ƒåº¦ç®—æ³•åŒ…æ‹¬å…ˆæ¥å…ˆæœåŠ¡(FCFS)ã€æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ(SSTF)ã€æ‰«æç®—æ³•(SCAN)ç­‰ï¼Œç›®çš„æ˜¯å‡å°‘å¯»é“æ—¶é—´ã€‚"},
    
    # ===== è®¡ç®—æœºç½‘ç»œï¼ˆ15æ¡ï¼‰=====
    {"instruction": "ä»€ä¹ˆæ˜¯OSIä¸ƒå±‚æ¨¡å‹ï¼Ÿ", "output": "OSIä¸ƒå±‚æ¨¡å‹ï¼šç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯TCP/IPå››å±‚æ¨¡å‹ï¼Ÿ", "output": "TCP/IPå››å±‚æ¨¡å‹ï¼šç½‘ç»œæ¥å£å±‚ã€ç½‘é™…å±‚ã€ä¼ è¾“å±‚ã€åº”ç”¨å±‚ã€‚"},
    {"instruction": "TCPå’ŒUDPçš„åŒºåˆ«", "output": "TCPé¢å‘è¿æ¥ã€å¯é ã€æœ‰åºã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ï¼›UDPæ— è¿æ¥ã€ä¸å¯é ã€é€Ÿåº¦å¿«ã€å¼€é”€å°ã€æ”¯æŒå¹¿æ’­å’Œå¤šæ’­ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ", "output": "ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹TCPè¿æ¥ï¼š1.å®¢æˆ·ç«¯å‘é€SYNï¼›2.æœåŠ¡å™¨å›å¤SYN-ACKï¼›3.å®¢æˆ·ç«¯å‘é€ACKã€‚ç¡®ä¿åŒæ–¹æ”¶å‘èƒ½åŠ›æ­£å¸¸ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ", "output": "å››æ¬¡æŒ¥æ‰‹ç»ˆæ­¢TCPè¿æ¥ï¼š1.å®¢æˆ·ç«¯å‘é€FINï¼›2.æœåŠ¡å™¨å›å¤ACKï¼›3.æœåŠ¡å™¨å‘é€FINï¼›4.å®¢æˆ·ç«¯å›å¤ACKã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯HTTPå’ŒHTTPSï¼Ÿ", "output": "HTTPæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜æ–‡ä¼ è¾“ï¼›HTTPSæ˜¯HTTP+SSL/TLSï¼ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯ã€å®Œæ•´æ€§ä¿æŠ¤ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯IPåœ°å€ï¼Ÿ", "output": "IPåœ°å€æ˜¯ç½‘ç»œå±‚çš„é€»è¾‘åœ°å€ï¼ŒIPv4 32ä½ç‚¹åˆ†åè¿›åˆ¶ï¼ŒIPv6 128ä½åå…­è¿›åˆ¶ï¼Œç”¨äºæ ‡è¯†ç½‘ç»œè®¾å¤‡ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯MACåœ°å€ï¼Ÿ", "output": "MACåœ°å€æ˜¯æ•°æ®é“¾è·¯å±‚çš„ç‰©ç†åœ°å€ï¼Œ48ä½åå…­è¿›åˆ¶ï¼Œå›ºåŒ–åœ¨ç½‘å¡ä¸Šï¼Œç”¨äºå±€åŸŸç½‘å†…é€šä¿¡ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯DNSï¼Ÿ", "output": "DNSåŸŸåç³»ç»Ÿï¼Œå°†åŸŸåè§£æä¸ºIPåœ°å€ï¼Œé‡‡ç”¨å±‚æ¬¡åŒ–å‘½åç©ºé—´ï¼Œåˆ†å¸ƒå¼æ•°æ®åº“ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ARPï¼Ÿ", "output": "ARPåœ°å€è§£æåè®®ï¼Œæ ¹æ®IPåœ°å€è§£æMACåœ°å€ï¼Œé€šè¿‡å¹¿æ’­è¯·æ±‚ã€å•æ’­å“åº”å®ç°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯è·¯ç”±åè®®ï¼Ÿ", "output": "è·¯ç”±åè®®åŒ…æ‹¬RIPï¼ˆè·ç¦»å‘é‡ï¼‰ã€OSPFï¼ˆé“¾è·¯çŠ¶æ€ï¼‰ã€BGPï¼ˆè·¯å¾„å‘é‡ï¼‰ï¼Œç”¨äºè·¯ç”±å™¨é—´äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯NATï¼Ÿ", "output": "NATç½‘ç»œåœ°å€è½¬æ¢ï¼Œå°†ç§æœ‰IPæ˜ å°„ä¸ºå…¬æœ‰IPï¼Œè§£å†³IPv4åœ°å€çŸ­ç¼ºï¼ŒåŒæ—¶æä¾›ä¸€å®šçš„å®‰å…¨æ€§ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯DHCPï¼Ÿ", "output": "DHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œè‡ªåŠ¨åˆ†é…IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNSç­‰ç½‘ç»œå‚æ•°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯HTTPçŠ¶æ€ç ï¼Ÿ", "output": "1xxä¿¡æ¯ã€2xxæˆåŠŸ(200 OK)ã€3xxé‡å®šå‘(301æ°¸ä¹…ç§»åŠ¨)ã€4xxå®¢æˆ·ç«¯é”™è¯¯(404 Not Found)ã€5xxæœåŠ¡å™¨é”™è¯¯(500)ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯Cookieå’ŒSessionï¼Ÿ", "output": "Cookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ŒSessionå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œéƒ½ç”¨äºç»´æŒHTTPçš„æ— çŠ¶æ€è¿æ¥ï¼Œè®°å½•ç”¨æˆ·çŠ¶æ€ã€‚"},
    
    # ===== è®¡ç®—æœºç»„æˆåŸç†ï¼ˆ15æ¡ï¼‰=====
    {"instruction": "ä»€ä¹ˆæ˜¯å†¯è¯ºä¾æ›¼ä½“ç³»ç»“æ„ï¼Ÿ", "output": "å†¯è¯ºä¾æ›¼ä½“ç³»åŒ…æ‹¬è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œé‡‡ç”¨å­˜å‚¨ç¨‹åºåŸç†ï¼ŒæŒ‡ä»¤å’Œæ•°æ®ç»Ÿä¸€å­˜å‚¨ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯CPUï¼Ÿ", "output": "CPUä¸­å¤®å¤„ç†å™¨ï¼ŒåŒ…æ‹¬è¿ç®—å™¨å’Œæ§åˆ¶å™¨ï¼Œè´Ÿè´£æ‰§è¡ŒæŒ‡ä»¤ã€å¤„ç†æ•°æ®ï¼Œç”±ALUã€CUã€å¯„å­˜å™¨ç»„æˆã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æµæ°´çº¿ï¼Ÿ", "output": "æµæ°´çº¿å°†æŒ‡ä»¤æ‰§è¡Œåˆ†ä¸ºå–æŒ‡ã€è¯‘ç ã€æ‰§è¡Œã€è®¿å­˜ã€å†™å›ç­‰é˜¶æ®µï¼Œå¤šä¸ªæŒ‡ä»¤é‡å æ‰§è¡Œï¼Œæé«˜ååç‡ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æµæ°´çº¿å†’é™©ï¼Ÿ", "output": "æµæ°´çº¿å†’é™©åŒ…æ‹¬ç»“æ„å†’é™©ï¼ˆèµ„æºå†²çªï¼‰ã€æ•°æ®å†’é™©ï¼ˆæ•°æ®ä¾èµ–ï¼‰ã€æ§åˆ¶å†’é™©ï¼ˆåˆ†æ”¯é¢„æµ‹å¤±è´¥ï¼‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ç¼“å­˜Cacheï¼Ÿ", "output": "Cacheæ˜¯CPUå’Œå†…å­˜ä¹‹é—´çš„é«˜é€Ÿç¼“å­˜ï¼Œåˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œå­˜å‚¨é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œå‡å°‘CPUç­‰å¾…æ—¶é—´ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯Cacheæ˜ å°„æ–¹å¼ï¼Ÿ", "output": "Cacheæ˜ å°„æ–¹å¼åŒ…æ‹¬ç›´æ¥æ˜ å°„ï¼ˆå†²çªç‡é«˜ï¼‰ã€å…¨ç›¸è”æ˜ å°„ï¼ˆç¡¬ä»¶å¤æ‚ï¼‰ã€ç»„ç›¸è”æ˜ å°„ï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ä¸»å­˜ï¼Ÿ", "output": "ä¸»å­˜ï¼ˆå†…å­˜ï¼‰æ˜¯éšæœºè®¿é—®å­˜å‚¨å™¨ï¼ŒåŒ…æ‹¬DRAMï¼ˆåŠ¨æ€éšæœºè®¿é—®å­˜å‚¨å™¨ï¼‰ï¼Œå­˜å‚¨è¿è¡Œä¸­çš„ç¨‹åºå’Œæ•°æ®ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ï¼Ÿ", "output": "è™šæ‹Ÿåœ°å€æ˜¯ç¨‹åºçœ‹åˆ°çš„é€»è¾‘åœ°å€ï¼Œç‰©ç†åœ°å€æ˜¯å†…å­˜å®é™…åœ°å€ï¼Œé€šè¿‡MMUè¿›è¡Œåœ°å€è½¬æ¢ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯ä¸­æ–­ï¼Ÿ", "output": "ä¸­æ–­æ˜¯CPUæš‚åœå½“å‰ç¨‹åºï¼Œè½¬è€Œå¤„ç†ç´§æ€¥äº‹ä»¶ï¼Œå¤„ç†å®Œå†è¿”å›ï¼ŒåŒ…æ‹¬å†…ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰å’Œå¤–ä¸­æ–­ï¼ˆç¡¬ä»¶ä¸­æ–­ï¼‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯DMAï¼Ÿ", "output": "DMAç›´æ¥å­˜å‚¨å™¨è®¿é—®ï¼Œå…è®¸å¤–è®¾ç›´æ¥å’Œå†…å­˜äº¤æ¢æ•°æ®ï¼Œä¸ç»è¿‡CPUï¼Œæé«˜æ•°æ®ä¼ è¾“æ•ˆç‡ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯RAIDï¼Ÿ", "output": "RAIDç£ç›˜é˜µåˆ—ï¼Œå°†å¤šä¸ªç£ç›˜ç»„åˆæé«˜æ€§èƒ½æˆ–å¯é æ€§ï¼ŒåŒ…æ‹¬RAID0ï¼ˆæ¡å¸¦åŒ–ï¼‰ã€RAID1ï¼ˆé•œåƒï¼‰ã€RAID5ï¼ˆåˆ†å¸ƒå¼æ ¡éªŒï¼‰ç­‰ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æµ®ç‚¹æ•°è¡¨ç¤ºï¼Ÿ", "output": "æµ®ç‚¹æ•°é‡‡ç”¨IEEE754æ ‡å‡†ï¼ŒåŒ…æ‹¬ç¬¦å·ä½ã€é˜¶ç ã€å°¾æ•°ï¼Œå¦‚32ä½å•ç²¾åº¦ï¼š1ä½ç¬¦å·+8ä½é˜¶ç +23ä½å°¾æ•°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯åŸç ã€åç ã€è¡¥ç ï¼Ÿ", "output": "åŸç æœ€é«˜ä½ç¬¦å·ä½ï¼Œå…¶ä½™æ•°å€¼ä½ï¼›åç æ­£æ•°åŒåŸç ï¼Œè´Ÿæ•°ç¬¦å·ä½ä¸å˜å…¶ä»–å–åï¼›è¡¥ç åç åŠ 1ï¼Œè®¡ç®—æœºç”¨è¡¥ç è¡¨ç¤ºæ•´æ•°ã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯æŒ‡ä»¤å‘¨æœŸï¼Ÿ", "output": "æŒ‡ä»¤å‘¨æœŸæ˜¯CPUæ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€æ—¶é—´ï¼ŒåŒ…æ‹¬å–æŒ‡å‘¨æœŸã€é—´å€å‘¨æœŸã€æ‰§è¡Œå‘¨æœŸã€ä¸­æ–­å‘¨æœŸã€‚"},
    {"instruction": "ä»€ä¹ˆæ˜¯RISCå’ŒCISCï¼Ÿ", "output": "RISCç²¾ç®€æŒ‡ä»¤é›†ï¼ŒæŒ‡ä»¤å°‘ã€é•¿åº¦å›ºå®šã€å•å‘¨æœŸæ‰§è¡Œï¼›CISCå¤æ‚æŒ‡ä»¤é›†ï¼ŒæŒ‡ä»¤å¤šã€é•¿åº¦å¯å˜ã€å¤šå‘¨æœŸæ‰§è¡Œã€‚"},
]

print(f"âœ… å·²æ”¶é›† {len(train_examples)} æ¡è®­ç»ƒæ•°æ®")
print(f"   æ•°æ®ç»“æ„: {sum(1 for x in train_examples if 'æ•°æ®ç»“æ„' in x['instruction'] or 'æ’åº' in x['instruction'])} æ¡")
print(f"   æ“ä½œç³»ç»Ÿ: {sum(1 for x in train_examples if 'è¿›ç¨‹' in x['instruction'] or 'å†…å­˜' in x['instruction'] or 'æ­»é”' in x['instruction'])} æ¡")
print(f"   è®¡ç®—æœºç½‘ç»œ: {sum(1 for x in train_examples if 'TCP' in x['instruction'] or 'IP' in x['instruction'] or 'HTTP' in x['instruction'])} æ¡")
print(f"   è®¡ç®—æœºç»„æˆ: {sum(1 for x in train_examples if 'CPU' in x['instruction'] or 'Cache' in x['instruction'] or 'æŒ‡ä»¤' in x['instruction'])} æ¡")

# ============ 2. ä¿å­˜åˆ°JSONæ–‡ä»¶ ============
save_path = r"C:\Users\LJA\Desktop\LLM-Project\data\train_data.json"
os.makedirs(os.path.dirname(save_path), exist_ok=True)

with open(save_path, 'w', encoding='utf-8') as f:
    json.dump(train_examples, f, ensure_ascii=False, indent=2)

print(f"\nğŸ’¾ æ•°æ®å·²ä¿å­˜åˆ°: {save_path}")
print(f"   æ–‡ä»¶å¤§å°: {os.path.getsize(save_path) / 1024:.1f} KB")

# ============ 3. ç”Ÿæˆè®­ç»ƒç”¨çš„æ ¼å¼åŒ–æ–‡æœ¬ ============
formatted_texts = []
for ex in train_examples:
    text = f"é—®é¢˜ï¼š{ex['instruction']}\nç­”æ¡ˆï¼š{ex['output']}"
    formatted_texts.append(text)

# æ˜¾ç¤ºå‡ ä¸ªç¤ºä¾‹
print("\nğŸ“ æ•°æ®ç¤ºä¾‹:")
for i in range(3):
    print(f"\nç¤ºä¾‹ {i+1}:")
    print(formatted_texts[i])

# ============ 4. ç»Ÿè®¡ä¿¡æ¯ ============
print("\nğŸ“Š æ•°æ®é›†ç»Ÿè®¡:")
print(f"   æ€»æ¡æ•°: {len(train_examples)}")
print(f"   å¹³å‡é—®é¢˜é•¿åº¦: {sum(len(ex['instruction']) for ex in train_examples) / len(train_examples):.1f} å­—ç¬¦")
print(f"   å¹³å‡ç­”æ¡ˆé•¿åº¦: {sum(len(ex['output']) for ex in train_examples) / len(train_examples):.1f} å­—ç¬¦")

# ============ 5. ç”Ÿæˆè®­ç»ƒä»£ç ï¼ˆç›´æ¥å¯ç”¨ï¼‰============
train_code = r'''
# ============ ä½¿ç”¨æ–°æ•°æ®è®­ç»ƒçš„ä»£ç  ============
import json
import torch
from transformers import AutoTokenizer, AutoModelForCausalLM, TrainingArguments, Trainer
from peft import LoraConfig, get_peft_model, TaskType
from datasets import Dataset

# åŠ è½½æ•°æ®
with open(r"{save_path}", 'r', encoding='utf-8') as f:
    train_examples = json.load(f)

# æ ¼å¼åŒ–
formatted_texts = []
for ex in train_examples:
    text = f"é—®é¢˜ï¼š{{ex['instruction']}}\\nç­”æ¡ˆï¼š{{ex['output']}}"
    formatted_texts.append(text)

# åŠ è½½æ¨¡å‹
model_name = "distilgpt2"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(model_name)

if tokenizer.pad_token is None:
    tokenizer.pad_token = tokenizer.eos_token

# æ•°æ®é¢„å¤„ç†
def tokenize_function(examples):
    inputs = tokenizer(
        examples["text"],
        truncation=True,
        padding="max_length",
        max_length=256,
        return_tensors="pt"
    )
    inputs["labels"] = inputs["input_ids"].clone()
    return inputs

dataset = Dataset.from_dict({{"text": formatted_texts}})
tokenized_dataset = dataset.map(tokenize_function, batched=True)

# LoRAé…ç½®
lora_config = LoraConfig(
    task_type=TaskType.CAUSAL_LM,
    r=8,
    lora_alpha=32,
    target_modules=["c_attn"],
    lora_dropout=0.1,
)

model = get_peft_model(model, lora_config)

# è®­ç»ƒé…ç½®
training_args = TrainingArguments(
    output_dir=r"C:\Users\LJA\Desktop\LLM-Project\models\lora_distilgpt2_v2",
    num_train_epochs=30,
    per_device_train_batch_size=4,
    logging_steps=10,
    save_strategy="epoch",
    learning_rate=3e-4,
    fp16=True,
    report_to="none",
)

# å¼€å§‹è®­ç»ƒ
trainer = Trainer(
    model=model,
    args=training_args,
    train_dataset=tokenized_dataset,
)

print("ğŸš€ å¼€å§‹è®­ç»ƒ...")
trainer.train()

# ä¿å­˜æ¨¡å‹
model.save_pretrained(r"C:\Users\LJA\Desktop\LLM-Project\models\lora_distilgpt2_v2")
print("âœ… è®­ç»ƒå®Œæˆï¼")
'''

print("\n" + "="*60)
print("ğŸš€ ä¸‹ä¸€æ­¥ï¼šç”¨æ–°æ•°æ®è®­ç»ƒæ¨¡å‹")
print("="*60)
print(train_code)

# ============ 6. ç”Ÿæˆæµ‹è¯•ä»£ç  ============
test_code = r'''
# ============ æµ‹è¯•æ–°æ¨¡å‹çš„ä»£ç  ============
import os
import torch
from transformers import AutoTokenizer, AutoModelForCausalLM
from peft import PeftModel

os.environ['TRANSFORMERS_OFFLINE'] = '1'
os.environ['HF_HUB_OFFLINE'] = '1'

base_model_path = r"C:\Users\LJA\Desktop\LLM-Project\models\base_models\distilgpt2"
lora_model_path = r"C:\Users\LJA\Desktop\LLM-Project\models\lora_distilgpt2_v2"

tokenizer = AutoTokenizer.from_pretrained(base_model_path, local_files_only=True)
base_model = AutoModelForCausalLM.from_pretrained(base_model_path, local_files_only=True)

if tokenizer.pad_token is None:
    tokenizer.pad_token = tokenizer.eos_token

model = PeftModel.from_pretrained(base_model, lora_model_path)
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
model = model.to(device)
model.eval()

def ask(question):
    prompt = f"é—®é¢˜ï¼š{{question}}\\nç­”æ¡ˆï¼š"
    inputs = tokenizer(prompt, return_tensors="pt").to(device)
    with torch.no_grad():
        outputs = model.generate(
            **inputs,
            max_new_tokens=100,
            temperature=0.7,
            do_sample=True,
            pad_token_id=tokenizer.pad_token_id
        )
    response = tokenizer.decode(outputs[0], skip_special_tokens=True)
    return response.split("ç­”æ¡ˆï¼š")[-1] if "ç­”æ¡ˆï¼š" in response else response

# æµ‹è¯•
test_questions = [
    "ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ï¼Ÿ",
    "æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«",
    "ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ",
    "TCPå’ŒUDPçš„åŒºåˆ«"
]

for q in test_questions:
    print(f"\\né—®: {{q}}")
    print(f"ç­”: {{ask(q)}}")
'''

print("\n" + "="*60)
print("ğŸ§ª æµ‹è¯•æ–°æ¨¡å‹çš„ä»£ç ")
print("="*60)
print(test_code)